"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.employerRouter = void 0;
const currentUser_1 = require("./../../middlewares/currentUser");
const express_1 = require("express");
const employer_1 = require("../../controllers/employer");
const employer_2 = require("../../utilities/validation/employer");
const requireAuth_1 = require("../../middlewares/requireAuth");
const validateRequest_1 = require("../../middlewares/validateRequest");
const checkRole_1 = require("../../middlewares/checkRole");
const fileUpload_1 = require("../../middlewares/fileUpload");
const router = (0, express_1.Router)();
exports.employerRouter = router;
router.get('/employers/:id', employer_1.show);
router.get('/employers/:id/details', currentUser_1.currentUser, requireAuth_1.requireAuth, employer_1.employerDetails);
router.get('/featured/employers', employer_1.featuredEmployers);
router.get('/candidates/employers', currentUser_1.currentUser, requireAuth_1.requireAuth, (0, checkRole_1.checkRole)('employer'), employer_1.latestCandidates);
router.post('/employers', (0, validateRequest_1.validateRequest)(employer_2.employerSignupSchema), employer_1.signup);
router.patch('/employers', currentUser_1.currentUser, requireAuth_1.requireAuth, (0, checkRole_1.checkRole)('employer'), fileUpload_1.fileUpload, (0, validateRequest_1.validateRequest)(employer_2.employerUpdateSchema), employer_1.update);
